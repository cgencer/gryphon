/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['notifiers/email.js']) {
  _$jscoverage['notifiers/email.js'] = [];
  _$jscoverage['notifiers/email.js'][1] = 0;
  _$jscoverage['notifiers/email.js'][2] = 0;
  _$jscoverage['notifiers/email.js'][4] = 0;
  _$jscoverage['notifiers/email.js'][6] = 0;
  _$jscoverage['notifiers/email.js'][8] = 0;
  _$jscoverage['notifiers/email.js'][9] = 0;
  _$jscoverage['notifiers/email.js'][11] = 0;
  _$jscoverage['notifiers/email.js'][13] = 0;
  _$jscoverage['notifiers/email.js'][15] = 0;
}
_$jscoverage['notifiers/email.js'][1]++;
var logger = require("winstoon").createLogger("notifiers/email");
_$jscoverage['notifiers/email.js'][2]++;
var nodemailer = require("nodemailer");
_$jscoverage['notifiers/email.js'][4]++;
module.exports = EmailSender;
_$jscoverage['notifiers/email.js'][6]++;
function EmailSender(emailInfo) {
  _$jscoverage['notifiers/email.js'][8]++;
  nodemailer.SMTP = emailInfo.smtp;
  _$jscoverage['notifiers/email.js'][9]++;
  this.send = (function (appname, title, message, callback) {
  _$jscoverage['notifiers/email.js'][11]++;
  logger.info("sending email", {appname: appname, title: title});
  _$jscoverage['notifiers/email.js'][13]++;
  var htmlMessage = message.replace(/\n/g, "<br>");
  _$jscoverage['notifiers/email.js'][15]++;
  nodemailer.send_mail({sender: emailInfo.me.name + "<" + emailInfo.me.email + ">", to: emailInfo.receivers.join(", "), subject: "[CD] " + appname + " - " + title, html: "<h3> Continious Deployment Info - " + appname + " </h3>" + htmlMessage, body: "Continious Deployment Info - " + appname + "\n\n" + message}, callback);
});
}
_$jscoverage['notifiers/email.js'].source = ["var logger = require('winstoon').createLogger('notifiers/email');","var nodemailer = require('nodemailer');","","module.exports = EmailSender;","","function EmailSender(emailInfo) {","","\tnodemailer.SMTP = emailInfo.smtp;","\tthis.send = function(appname, title, message, callback) {","\t\t","\t\tlogger.info('sending email', {appname: appname, title: title});","","\t\tvar htmlMessage = message.replace(/\\n/g, '&lt;br&gt;');","\t\t// send an e-mail","\t\tnodemailer.send_mail(","","\t\t\t{","\t\t\t\tsender: emailInfo.me.name + '&lt;' + emailInfo.me.email + '&gt;',","\t\t\t\tto: emailInfo.receivers.join(', '),","\t\t\t\tsubject: '[CD] ' + appname +' - ' + title ,","\t\t\t\thtml: '&lt;h3&gt; Continious Deployment Info - ' + appname + ' &lt;/h3&gt;' + htmlMessage,","\t\t\t\tbody: 'Continious Deployment Info - ' + appname + '\\n\\n' + message","\t\t\t},","","\t\t\tcallback","\t\t);","\t};","}"];
